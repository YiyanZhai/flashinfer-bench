{% macro solution_row(entry, rank, index, workload) %}
{% set safe_id = workload ~ "-" ~ index ~ "-" ~ entry.solution[:10]|replace("/", "_") %}
<tr class="hover:bg-gray-50">
  <td class="border px-4 py-2">{{ rank }}</td>
  <td class="border px-4 py-2 font-mono text-blue-700">{{ entry.solution }}</td>
  <td class="border px-4 py-2">{{ "%.3f"|format(entry.latency_ms) }}</td>
  <td class="border px-4 py-2">{{ "%.2fx"|format(entry.speedup) }}</td>
  <td class="border px-4 py-2">{{ entry.author }}</td>
  <td class="border px-4 py-2">
    <button
      class="text-blue-600 underline text-sm toggle-solution"
      data-target="solution-{{ safe_id }}"
    >
      {% if entry.solution_full %}
        Show
      {% else %}
        No Solution
      {% endif %}
    </button>
  </td>
</tr>
<tr id="solution-{{ safe_id }}" class="hidden bg-gray-50">
  <td colspan="6" class="border px-4 py-2">
    <pre class="reference-block">
      <code id="code-{{ safe_id }}">{{ entry.solution_full | e }}</code>
    </pre>
    <button
      class="text-sm text-blue-600 underline copy-button"
      data-target="code-{{ safe_id }}"
    >
      Copy to Clipboard
    </button>
  </td>
</tr>
{% endmacro %}