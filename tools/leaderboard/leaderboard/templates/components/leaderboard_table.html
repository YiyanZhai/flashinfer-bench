{% from "components/table_row.html" import solution_row %}

{% macro leaderboard_table(entries_by_device_and_workload) %}
{% if entries_by_device_and_workload %}
  {% for device, workloads in entries_by_device_and_workload.items() %}
    <h3 class="text-xl font-semibold mt-8 mb-4 text-gray-800">{{ device }}</h3>
    
    {% for workload_str, entries in workloads.items() %}
    <div class="workload-section" data-workload="{{ workload_str }}">
      <h4 class="text-lg font-semibold mb-3 text-gray-700"></h4>
        Workload:
        <code>
          {{ workload_str | replace('\"', '') | replace('{', '') | replace('}', '') | replace(': ', ' = ') }}
        </code>
      </h4>
      <div class="overflow-x-auto">
        <table class="min-w-full table-auto border border-gray-300 text-sm">
          <thead class="bg-gray-100">
            <tr>
              <th class="border px-4 py-2 text-left">Rank</th>
              <th class="border px-4 py-2 text-left">Solution</th>
              <th class="border px-4 py-2 text-left">Latency (ms)</th>
              <th class="border px-4 py-2 text-left">Speedup</th>
              <th class="border px-4 py-2 text-left">Author</th>
              <th class="border px-4 py-2 text-left">Solution</th>
            </tr>
          </thead>
          <tbody>
            {% for entry in entries %}
              {{ solution_row(entry, loop.index, loop.index0, workload_str) }}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% endfor %}
  {% endfor %}
{% else %}
  <p class="text-gray-600">No entries available for this kernel.</p>
{% endif %}
{% endmacro %}